"use strict";(globalThis["webpackChunkhub4u_menu"]=globalThis["webpackChunkhub4u_menu"]||[]).push([[312],{4928:(e,t,o)=>{o.r(t),o.d(t,{default:()=>le});var n=o(2444),r=o(4044);const l={class:"sign-in row q-col-gutter-md"},a={class:"col-12 title text-center"},u={class:"col-12 sub-title text-center"},i={class:"col-12"};function d(e,t,o,d,c,s){const f=(0,n.E1)("email-auth"),h=(0,n.E1)("register-form"),m=(0,n.E1)("validate-code-form"),g=(0,n.E1)("q-page");return(0,n.Wz)(),(0,n.Az)(g,{class:"container q-pa-md q-pa-md-lg flex flex-center"},{default:(0,n.Ql)((()=>[(0,n.QD)("div",l,[(0,n.QD)("div",a,(0,r.WA)(e.$t("auth.title")),1),(0,n.QD)("div",u,(0,r.WA)(e.subTitle),1),(0,n.QD)("div",i,["get-code"===e.mode?((0,n.Wz)(),(0,n.Az)(f,{key:0,onCodeSended:e.onCodeSended},null,8,["onCodeSended"])):"register"===e.mode?((0,n.Wz)(),(0,n.Az)(h,{key:1,"code-id":e.codeId,onAuth:e.onAuth},null,8,["code-id","onAuth"])):((0,n.Wz)(),(0,n.Az)(m,{key:2,"code-id":e.codeId,onAuth:e.onAuth},null,8,["code-id","onAuth"]))])])])),_:1})}var c=o(1144),s=o(8528);const f={class:"q-pt-md flex justify-center"};function h(e,t,o,r,l,a){const u=(0,n.E1)("q-input"),i=(0,n.E1)("v-field"),d=(0,n.E1)("q-btn"),c=(0,n.E1)("q-form"),s=(0,n.E1)("v-form");return(0,n.Wz)(),(0,n.Az)(s,null,{default:(0,n.Ql)((({handleSubmit:t})=>[(0,n.K2)(c,{onSubmit:o=>t(e.getAuthCode)},{default:(0,n.Ql)((()=>[(0,n.K2)(i,{label:e.$t("auth.phone"),name:"phone",rules:"required|min:14"},{default:(0,n.Ql)((({field:t,handleChange:o,errorMessage:r})=>[(0,n.K2)(u,{autofocus:"",inputmode:"tel",label:e.$t("auth.phone"),mask:e.getPhoneMask(t.value),"model-value":t.value,error:!!r,"error-message":r,"onUpdate:modelValue":o},null,8,["label","mask","model-value","error","error-message","onUpdate:modelValue"])])),_:1},8,["label"]),(0,n.QD)("div",f,[(0,n.K2)(d,{type:"submit",color:"primary",unelevated:"",label:e.$t("auth.getCode"),loading:e.requestingCode},null,8,["label","loading"])])])),_:2},1032,["onSubmit"])])),_:1})}var m=o(8176),g=o(8252),b=function(e,t,o,n){var r,l=arguments.length,a=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(l<3?r(a):l>3?r(t,o,a):r(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a},p=function(e,t,o,n){function r(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function a(e){try{i(n.next(e))}catch(t){l(t)}}function u(e){try{i(n["throw"](e))}catch(t){l(t)}}function i(e){e.done?o(e.value):r(e.value).then(a,u)}i((n=n.apply(e,t||[])).next())}))};let v=class extends c.cr{constructor(){super(...arguments),Object.defineProperty(this,"requestingCode",{enumerable:!0,configurable:!0,writable:!0,value:!1})}getPhoneMask(e=""){return e.length<=14?"(##) ####-#####":"(##) #####-####"}getAuthCode(e){return p(this,void 0,void 0,(function*(){try{this.requestingCode=!0;const{phone:t}=e,o=yield(0,g.cr)(t),{codeId:n,isRegistered:r}=o;this.$emit("codeSended",n,r),this.requestingCode=!1}catch(t){this.requestingCode=!1}}))}};v=b([(0,c.Zq)({components:{VForm:m.QF,VField:m.IN}})],v);const y=v;var q=o(8716),C=o(1908),Q=o(6552),j=o(9140),P=o(5252),w=o.n(P);const O=(0,q.c)(y,[["render",h]]),$=O;w()(y,"components",{QForm:C.c,QInput:Q.c,QBtn:j.c});const x={class:"q-pt-md flex justify-center"};function E(e,t,o,r,l,a){const u=(0,n.E1)("q-input"),i=(0,n.E1)("v-field"),d=(0,n.E1)("q-btn"),c=(0,n.E1)("q-form"),s=(0,n.E1)("v-form");return(0,n.Wz)(),(0,n.Az)(s,null,{default:(0,n.Ql)((({handleSubmit:t})=>[(0,n.K2)(c,{onSubmit:o=>t(e.getAuthCode)},{default:(0,n.Ql)((()=>[(0,n.K2)(i,{label:e.$t("auth.email"),name:"email",rules:"required"},{default:(0,n.Ql)((({field:t,handleChange:o,errorMessage:r})=>[(0,n.K2)(u,{autofocus:"",label:e.$t("auth.email"),"model-value":t.value,error:!!r,"error-message":r,"onUpdate:modelValue":o},null,8,["label","model-value","error","error-message","onUpdate:modelValue"])])),_:1},8,["label"]),(0,n.QD)("div",x,[(0,n.K2)(d,{type:"submit",color:"primary",unelevated:"",label:e.$t("auth.getCode"),loading:e.requestingCode},null,8,["label","loading"])])])),_:2},1032,["onSubmit"])])),_:1})}var V=function(e,t,o,n){var r,l=arguments.length,a=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(l<3?r(a):l>3?r(t,o,a):r(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a},A=function(e,t,o,n){function r(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function a(e){try{i(n.next(e))}catch(t){l(t)}}function u(e){try{i(n["throw"](e))}catch(t){l(t)}}function i(e){e.done?o(e.value):r(e.value).then(a,u)}i((n=n.apply(e,t||[])).next())}))};let I=class extends c.cr{constructor(){super(...arguments),Object.defineProperty(this,"requestingCode",{enumerable:!0,configurable:!0,writable:!0,value:!1})}getAuthCode(e){return A(this,void 0,void 0,(function*(){try{this.requestingCode=!0;const{email:t}=e,o=yield(0,g.qc)(t),{codeId:n,isRegistered:r}=o;this.$emit("codeSended",n,r),this.requestingCode=!1}catch(t){this.requestingCode=!1}}))}};I=V([(0,c.Zq)({components:{VForm:m.QF,VField:m.IN}})],I);const R=I,K=(0,q.c)(R,[["render",E]]),_=K;w()(R,"components",{QForm:C.c,QInput:Q.c,QBtn:j.c});const F={class:"flex justify-center"};function S(e,t,o,r,l,a){const u=(0,n.E1)("q-input"),i=(0,n.E1)("v-field"),d=(0,n.E1)("q-btn"),c=(0,n.E1)("q-form"),s=(0,n.E1)("v-form");return(0,n.Wz)(),(0,n.Az)(s,null,{default:(0,n.Ql)((({handleSubmit:t})=>[(0,n.K2)(c,{class:"q-col-gutter-md",onSubmit:o=>t(e.register)},{default:(0,n.Ql)((()=>[(0,n.K2)(i,{label:e.$t("auth.name"),name:"name",rules:"required"},{default:(0,n.Ql)((({field:t,handleChange:o,errorMessage:r})=>[(0,n.K2)(u,{autofocus:"",label:e.$t("auth.name"),"model-value":t.value,error:!!r,"error-message":r,"onUpdate:modelValue":o},null,8,["label","model-value","error","error-message","onUpdate:modelValue"])])),_:1},8,["label"]),(0,n.K2)(i,{label:e.$t("auth.phone"),name:"phone",rules:"required|min:14"},{default:(0,n.Ql)((({field:t,handleChange:o,errorMessage:r})=>[(0,n.K2)(u,{inputmode:"tel",label:e.$t("auth.phone"),mask:e.getPhoneMask(t.value),"model-value":t.value,error:!!r,"error-message":r,"onUpdate:modelValue":o},null,8,["label","mask","model-value","error","error-message","onUpdate:modelValue"])])),_:1},8,["label"]),(0,n.K2)(i,{label:e.$t("auth.code"),name:"code",rules:"required|min:6"},{default:(0,n.Ql)((({field:t,handleChange:o,errorMessage:r})=>[(0,n.K2)(u,{inputmode:"number",maxlength:"6",label:e.$t("auth.code"),"model-value":t.value,error:!!r,"error-message":r,"onUpdate:modelValue":o},null,8,["label","model-value","error","error-message","onUpdate:modelValue"])])),_:1},8,["label"]),(0,n.QD)("div",F,[(0,n.K2)(d,{type:"submit",color:"primary",unelevated:"",label:e.$t("auth.submitRegister"),loading:e.loading},null,8,["label","loading"])])])),_:2},1032,["onSubmit"])])),_:1})}var k=o(2564),z=function(e,t,o,n){var r,l=arguments.length,a=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(l<3?r(a):l>3?r(t,o,a):r(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a},D=function(e,t,o,n){function r(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function a(e){try{i(n.next(e))}catch(t){l(t)}}function u(e){try{i(n["throw"](e))}catch(t){l(t)}}function i(e){e.done?o(e.value):r(e.value).then(a,u)}i((n=n.apply(e,t||[])).next())}))};let U=class extends c.cr{constructor(){super(...arguments),Object.defineProperty(this,"processLogin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"codeId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"loading",{enumerable:!0,configurable:!0,writable:!0,value:!1})}getPhoneMask(e=""){return e.length<=14?"(##) ####-#####":"(##) #####-####"}register(e){return D(this,void 0,void 0,(function*(){try{this.loading=!0;const t=yield(0,g.$y)(Object.assign(Object.assign({},e),{codeId:this.codeId}));yield this.processLogin(t),this.$emit("auth"),this.loading=!1}catch(t){this.loading=!1}}))}};z([(0,k.e)({required:!0})],U.prototype,"codeId",void 0),U=z([(0,c.Zq)({components:{VForm:m.QF,VField:m.IN},methods:Object.assign({},(0,s.ae)("user",["processLogin"]))})],U);const W=U,M=(0,q.c)(W,[["render",S]]),T=M;w()(W,"components",{QForm:C.c,QInput:Q.c,QBtn:j.c});const L={class:"q-pt-md flex justify-center"};function Z(e,t,o,r,l,a){const u=(0,n.E1)("q-input"),i=(0,n.E1)("v-field"),d=(0,n.E1)("q-btn"),c=(0,n.E1)("q-form"),s=(0,n.E1)("v-form");return(0,n.Wz)(),(0,n.Az)(s,null,{default:(0,n.Ql)((({handleSubmit:t})=>[(0,n.K2)(c,{onSubmit:o=>t(e.authWithCode)},{default:(0,n.Ql)((()=>[(0,n.K2)(i,{label:e.$t("auth.code"),name:"code",rules:"required|min:6"},{default:(0,n.Ql)((({field:t,handleChange:o,errorMessage:r})=>[(0,n.K2)(u,{autofocus:"",inputmode:"number",maxlength:"6",label:e.$t("auth.code"),"model-value":t.value,error:!!r,"error-message":r,"onUpdate:modelValue":o},null,8,["label","model-value","error","error-message","onUpdate:modelValue"])])),_:1},8,["label"]),(0,n.QD)("div",L,[(0,n.K2)(d,{type:"submit",color:"primary",unelevated:"",label:e.$t("auth.submitCode"),loading:e.loading},null,8,["label","loading"])])])),_:2},1032,["onSubmit"])])),_:1})}var B=function(e,t,o,n){var r,l=arguments.length,a=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(l<3?r(a):l>3?r(t,o,a):r(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a},N=function(e,t,o,n){function r(e){return e instanceof o?e:new o((function(t){t(e)}))}return new(o||(o=Promise))((function(o,l){function a(e){try{i(n.next(e))}catch(t){l(t)}}function u(e){try{i(n["throw"](e))}catch(t){l(t)}}function i(e){e.done?o(e.value):r(e.value).then(a,u)}i((n=n.apply(e,t||[])).next())}))};let G=class extends c.cr{constructor(){super(...arguments),Object.defineProperty(this,"processLogin",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"codeId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"loading",{enumerable:!0,configurable:!0,writable:!0,value:!1})}authWithCode(e){return N(this,void 0,void 0,(function*(){try{this.loading=!0;const{code:t}=e,o=yield(0,g.yY)({code:t,codeId:this.codeId});yield this.processLogin(o),this.$emit("auth"),this.loading=!1}catch(t){this.loading=!1}}))}getPhoneMask(e=""){return e.length<=14?"(##) ####-#####":"(##) #####-####"}};B([(0,k.e)({required:!0})],G.prototype,"codeId",void 0),G=B([(0,c.Zq)({components:{VForm:m.QF,VField:m.IN},methods:Object.assign({},(0,s.ae)("user",["processLogin"]))})],G);const Y=G,H=(0,q.c)(Y,[["render",Z]]),J=H;w()(Y,"components",{QForm:C.c,QInput:Q.c,QBtn:j.c});var X,ee=function(e,t,o,n){var r,l=arguments.length,a=l<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,o):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,o,n);else for(var u=e.length-1;u>=0;u--)(r=e[u])&&(a=(l<3?r(a):l>3?r(t,o,a):r(t,o))||a);return l>3&&a&&Object.defineProperty(t,o,a),a};(function(e){e["GetCode"]="get-code",e["Register"]="register",e["ValidateCode"]="validate-code"})(X||(X={}));let te=class extends c.cr{constructor(){super(...arguments),Object.defineProperty(this,"user",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"codeId",{enumerable:!0,configurable:!0,writable:!0,value:""}),Object.defineProperty(this,"mode",{enumerable:!0,configurable:!0,writable:!0,value:X.GetCode})}get subTitle(){return{[X.GetCode]:this.$t("auth.getCodeText"),[X.Register]:this.$t("auth.registerText"),[X.ValidateCode]:this.$t("auth.validateCodeText")}[this.mode]}mounted(){this.user&&this.$router.push("/menu")}onCodeSended(e,t){this.codeId=e,this.mode=t?X.ValidateCode:X.Register}onAuth(){this.$router.push("/menu")}};te=ee([(0,c.Zq)({components:{PhoneAuth:$,EmailAuth:_,RegisterForm:T,ValidateCodeForm:J},computed:Object.assign({},(0,s.gV)("user",["user"]))})],te);const oe=te;var ne=o(7059);const re=(0,q.c)(oe,[["render",d],["__scopeId","data-v-521f0f72"]]),le=re;w()(oe,"components",{QPage:ne.c})}}]);